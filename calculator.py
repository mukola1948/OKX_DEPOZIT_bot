# ============================================================
# ФАЙЛ: calculator.py
# НАЗВА: OKX Deposit Calculations
#
# ОПИС:
# - Розрахунок відсоткової зміни
# - Оновлення Dминуле (історичний максимум)
#   УМОВА:
#   якщо Dпоточне > Dминуле → новий максимум
# ============================================================

def calc_percent(d_cur: float, d_past: float) -> float:
    """
    Розрахунок відсоткової зміни від Dминуле
    """
    if d_past == 0:
        return 0.0
    return (d_cur - d_past) / d_past * 100.0


def calc_new_d_past(d_past: float, d_cur: float) -> tuple[float, bool]:
    """
    Дминуле визначається як історичний максимум:
    якщо Дпоточне більше — оновлюємо,
    інакше залишаємо без змін.

    Повертає:
    - нове значення Dминуле
    - прапорець new_max (True, якщо зафіксовано новий максимум)
    """
    if d_cur > d_past:
        return d_cur, True
    return d_past, False
